platform:
  product: aw
  provider: putenv-vsphere
  plugin_version: 0.1.0.pre

  environments:
    - int
    - qa

  nodename:
    - 'node'
    - instance

  # You can add any other custom attributes to the platform definition
  # by creating additional yml files with key values. The referenced
  # files are, by convention, assumed to have the following structure:
  #
  # tags:
  #
  #   tagset1: &tagset1
  #     key1: value
  #     key2: value
  #     ...
  #
  #   tagset2:
  #     <<: *tagset1
  #     key2: override value
  #
  #
  # Example: array of string
  #
  # references:
  #   path: 'infrastructure/'
  #   keyfiles:
  #     - tags
  #

  # Pools are used to define all the required elements of a component.
  # If you have a front-end web tier, the number of servers in the pool,
  # the ram, cpu, image to use, etc, are all defined in a pool
  # definition.
  #
  # The keys defined in this template are considered required for this plugin
  # though you can add additional keys either through references files
  # or directly.
  #
  # vcenter         reference to record set in vcenter required file
  # network         reference to record set in network required file
  # compute         reference to record set in compute required file
  # count           The number of components in the load balance pool
  # runlist         Chef runlist(s) for the node, array of strings
  # componentrole   optional custom role created by substituting the component name for # in the supplied string
  # chefserver      url for chef server
  # addresses       not necessary to define specific values in a pool definition, must include array of IP in component
  #
  # Example
  #
  # pools:
  #   webdefault: &webdefault
  #     vcenter: nonprod
  #     network: devweb
  #     compute: nonprodweb
  #     count: 2
  #     runlist:
  #       - 'role[loc_uswest]'
  #       - 'role[base]'
  #     componentrole: 'role[aw_#]'
  #     chefserver: https://chef
  #
  #
  pools:

    defaultpool: &defaultpool
      vcenter: nonprod
      networks: devweb
      compute: nonprodweb
      count: 2
      runlist:
        - 'role[loc_uswest]'
        - 'recipe[loc_uswest]'
      componentrole: 'role[aw_#]'
      chefserver: https://manage.chef.io
      addresses:
        -

  components:

    api:
      <<: *defaultpool
      addresses:
        - 10.10.10.1
        - 10.10.10.2

    aui:
      <<: *defaultpool
      addresses:
        - 10.10.10.10
        - 10.10.10.20